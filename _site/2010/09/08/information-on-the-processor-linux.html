<h3>逻辑CPU个数</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">cat /proc/cpuinfo <span class="p">|</span> grep <span class="s2">&quot;processor&quot;</span> <span class="p">|</span> wc -l
</code></pre></div>
<h3>物理CPU个数</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">cat /proc/cpuinfo <span class="p">|</span> grep <span class="s2">&quot;physical id&quot;</span> <span class="p">|</span> sort <span class="p">|</span> uniq <span class="p">|</span> wc -l
</code></pre></div>
<p>&quot;siblings&quot;指的是一个物理CPU有几个逻辑CPU。
&quot;cpu cores&quot;指的是一个物理CPU有几个核。
不应该按照flags里是否有ht标志来判断系统是否有超线程能力，而应该：
* 如果&quot;siblings&quot;和&quot;cpu cores&quot;<strong>一致</strong>，则说明<strong>不支持</strong>超线程，或者<strong>超线程未打开</strong>。
* 如果&quot;siblings&quot;是&quot;cpu cores&quot;<strong>的两倍</strong>，则说明<strong>支持</strong>超线程，并且<strong>超线程已打开</strong>。</p>

<h3>举例说明</h3>

<p>两个双核超线程CPU：</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">processor   <span class="m">0</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> 7
physical id <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> 1
siblings    <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> 4
core id     <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> 1
cpu cores   <span class="m">2</span> <span class="m">2</span> <span class="m">2</span> <span class="m">2</span> <span class="m">2</span> <span class="m">2</span> <span class="m">2</span> 2
</code></pre></div>
<p>感谢老男赐予的知识。</p>
