<!DOCTYPE html>
<html>
  <head>
    <!-- head -->
        <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CSS Expression（动态属性）用法总结</title>

    <!-- favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="http://codante.org/blog/assets/img/favicon.ico" />
    <link rel="icon" type="image/x-icon" href="http://codante.org/blog/assets/img/favicon.ico" />
    <!-- /favicon -->

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="codante" href="http://codante.org/blog/feed.xml" />
    <!-- /RSS -->
    <!-- stylesheet -->
    <link rel="stylesheet" href="http://codante.org/blog/assets/css/monokai_sublime.min.css" />
    <link rel="stylesheet" href="http://codante.org/blog/assets/css/style.min.css" />
    <!-- /stylesheets -->
    <!-- scripts -->
    <script src="http://codante.org/blog/assets/js/zepto.min.js"></script>
    <script src="http://codante.org/blog/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="http://codante.org/blog/assets/js/c.min.js"></script>
    <script>
      $CONFIG = {};
      $CONFIG.url = 'http://codante.org/blog';
    </script>
    <!-- /scripts -->
    <!-- /head -->
  </head>
  <body>

    <div class="footer-clear post-wrapper">

  <!-- post archive trigger -->
  <div class="post-archive-trigger">
    <div class="post-archive-icon"></div>
  </div>
  <!-- /post archive trigger -->

  <!-- post archive -->
  <div class="post-archive"></div>
  <!-- /post archive -->

  <!-- post header -->
  <div class="post-header">
    <h1>CSS Expression（动态属性）用法总结</h1>
    <span>2011-02-11</span>
  </div>
  <!-- /post header -->

  <!-- post content -->
  

  <div class="post-content chinese">
    <h2>CSS Expression</h2>

<p>动态 css属性，ie 私有，从5.0开始引入（IE8 不支持），参考 <a href="http://msdn.microsoft.com/en-us/library/ms537634.aspx">MSDN</a>。一般只用在IE6的hack。</p>

<h3>优点</h3>

<p>css属性动态生成，所以基本 js 能做的它都能做。选择器用的是 css的，比 js 方便得多。</p>

<h3>缺点</h3>

<p>expression 会反复执行，有严重的效率问题。触发方式并不是通过事件，类似于js中的 interval 。</p>

<h2>实例</h2>

<h3>背景闪烁</h3>

<p>IE6的背景闪烁Bug Fix</p>
<figure class="highlight"><pre><code class="language-css" data-lang="css">body {
zoom: expression(function(el){
document.execCommand(&#39;BackgroundImageCache&#39;, false, true);
el.style.zoom = &#39;1&#39;;
}(this));
}
</code></pre></figure>
<h3>input样式</h3>

<p>给不同 type 的 input 赋予不同的样式</p>
<figure class="highlight"><pre><code class="language-css" data-lang="css">input {
zoom: expression(function(el){
    el.style.zoom = &quot;1&quot;;
    el.className ? el.className+=&quot; &quot;+el.type : el.className=el.type;
}(this));
}
</code></pre></figure>
<h3>隔行换色</h3>

<p>zebra lists</p>
<figure class="highlight"><pre><code class="language-css" data-lang="css">.test {
unicode-bidi: expression(function(el){
    el.style.unicodeBidi = &quot;normal&quot;;
    var childs = el.getElementsByTagName(&quot;li&quot;);
    for(var i=0; i
        (i % 2)?childs[i].className+=&quot; even&quot;:childs[i].className+=&quot; odd&quot;;
    }
}(this));
}
</code></pre></figure>
<h3>:befor,:after</h3>

<p>模拟&quot; :before&quot; 或者 &quot;:after&quot;</p>
<figure class="highlight"><pre><code class="language-css" data-lang="css">.test {
letter-spacing: expression(function(el){
    el.style.letterSpacing = &quot;0&quot;;
    var newchild = document.createElement(&quot;span&quot;);
    newchild.className=&quot;after&quot;;
    newchild.appendChild(document.createTextNode(&quot; World!&quot;));
    el.appendChild(newchild);
}(this));
}
</code></pre></figure>
<h3>图片缩放</h3>

<p>模拟图片的：max-width 和 max-height (或 min-width 和 min-height)</p>
<figure class="highlight"><pre><code class="language-css" data-lang="css">.max-width span img {
max-width:120px;
max-height:120px;
zoom:expression(function(el){
    el.style.zoom = &quot;1&quot;;
    var resizeImg = function() {
        if (el.width &amp;gt; 120 || el.height &amp;gt; 120) {
            if (el.width &amp;gt; el.height) {
                el.width = &quot;120&quot;;
                el.height = el.height * (el.width / 120);
            } else {
                el.height = &quot;120&quot;;
                el.width = el.width * (el.height / 120);
            }
        }
    }
    if (el.complete) {
        resizeImg();
    } else {
        el.onload = function() {
            resizeImg();
        }
    }
}(this));
}
</code></pre></figure>
<h3>IE6的鼠标滑过</h3>

<p>a之外元素:hover</p>
<figure class="highlight"><pre><code class="language-css" data-lang="css">.ie6-hover input:hover, .ie6-hover .h {
border:1px solid red;
}
.enable-ie6-hover input {
_zoom:expression(function(el){
    el.style.zoom = &quot;0&quot;;
    el.onmouseenter = function() {
        el.className = &quot;h&quot;;
    };
    el.onmouseleave = function() {
        el.className = &quot;&quot;;
    };
}(this));
}
</code></pre></figure>
<h3>IE6行高问题</h3>

<p>line-height bug</p>
<figure class="highlight"><pre><code class="language-css" data-lang="css">.ie6-line-height-bug { background:\#f2f2f2; line-height:50px; zoom:1; }
.ie6-line-height-bug-fixed input {
_zoom: expression(function(el){
    el.style.zoom = &quot;1&quot;;
    var iefixer = document.createElement(&quot;b&quot;);
    iefixer.style.zoom = 1;
    el.parentNode.insertBefore(iefixer, el);
}(this));
}
</code></pre></figure>
  </div>
  <!-- /post content -->

  <!-- post navigator -->
  <div class="post-nav">
    
    <a class="post-nav-previous" href="http://codante.org/blog/2011/02/09/javascript-development-tools-comprehensive-and-practical.html">JavaScript开发工具，全面&实用！</a>
    

    
    <div class="post-nav-sep"></div>
    

    
    <a class="post-nav-next" href="http://codante.org/blog/2011/02/11/css3-rounded-attributes-of-the-implementation-of-the-browser.html">CSS3圆角属性在各浏览器中的实现</a>
    
  </div>
  <!-- /post navigator -->

  

  <!-- footer -->
  <footer class="footer">
  <a class="link-1" href="http://codante.org/blog">codante.org</a>
  <span>&copy;</span>
  <span><script type="text/javascript">document.write(new Date().getFullYear());</script></span>
  <br />
  <span>Powered by <a class="link-1" href="http://jekyllrb.com/">Jekyll</a> with <a class="link-1" href="https://github.com/kkninjae/book">Book</a> theme.</span>
</footer>

  <!-- /footer -->

</div>


    
    
    <!-- Baidu Analytics -->
      <div style="opacity: 0; position: absolute; left: -10000px;">
    <script src="//hm.baidu.com/h.js?b73a1c414265340e2dd6a77fa1ac1b75"></script>
</div>
    <!-- /Baidu Analytics -->
    
  </body>
</html>
