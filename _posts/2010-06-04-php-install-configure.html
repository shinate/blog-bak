---
layout: post
status: publish
published: true
title: Linux下的PHP安装及配置
author:
  display_name: "莳子"
  login: admin
  email: shine.wangrs@gmail.com
  url: http://codante.org
author_login: admin
author_email: shine.wangrs@gmail.com
author_url: http://codante.org
excerpt: PHP是一种易于学习和使用的服务器端脚本语言。他可以在服务器端独立运行，也可以通过apache来发布，本文根据实际操作详细介绍linux系统(Centos
  5.4_x86_64)下的php安装过程。
wordpress_id: 28
wordpress_url: http://codante.org/php%e5%ae%89%e8%a3%85%e5%8f%8a%e9%85%8d%e7%bd%ae.html
date: '2010-06-04 11:41:39 +0800'
date_gmt: '2010-06-04 03:41:39 +0800'
---
<h2>下载软件包</h2>
<p>[bash]wget http://cn.php.net/get/php-5.2.9.tar.gz/from/this/mirror[/bash]</p>
<h2>编译安装</h2>
<p>[bash]<br />
./configure \<br />
--prefix=/usr/local/php5 \<br />
--with-apxs2=/usr/local/apache2/bin/apxs \<br />
--with-mysql=/usr/local/mysql \<br />
--with-ttf \<br />
--with-xmlrpc \<br />
--with-openssl \<br />
--with-zlib \<br />
--with-freetype-dir \<br />
--with-gd \<br />
--with-jpeg-dir \<br />
--with-png-dir \<br />
--with-iconv=/usr/local/libiconv \<br />
--enable-short-tags \<br />
--enable-sockets \<br />
--enable-zend-multibyte \<br />
--enable-soap \<br />
--enable-mbstring \<br />
--enable-static \<br />
--enable-gd-native-ttf \<br />
--with-curl<br />
make<br />
make install<br />
[/bash]</p>
<h2>配置</h2>
<p>拷贝配置文件到安装目录</p>
<p>[bash]cp php.ini-dist /usr/local/php5/lib/php.ini[/bash]</p>
<h2>启动中遇到的问题</h2>
<p>重启apache</p>
<p>[code]遇到错误: httpd: Syntax error on line 54 of /usr/local/apache2/conf/httpd.conf: Cannot load /usr/local/apache2/modules/libphp5.so into server: /usr/local/apache2/modules/libphp5.so: cannot restore segment prot after reloc: Permission denied[/code]</p>
<h3>解决办法1</h3>
<p>设置通过selinux的检验</p>
<p>[bash]chcon -t texrel_shlib_t /usr/local/apache2/modules/libphp5.so[/bash]</p>
<h3>解决办法2</h3>
<p>关闭selinux</p>
<p>[bash]vi /etc/selinux/config[/bash]</p>
<p>设置</p>
<p>[code]SELINUX=disabled[/code]</p>
<p><strong><span style="color: #ff0000;">重启apache，安装完毕</span></strong></p>
