---
layout: post
status: publish
published: true
title: wordpress搜索页面关键词加亮
author:
  display_name: "莳子"
  login: admin
  email: shine.wangrs@gmail.com
  url: http://codante.org
author_login: admin
author_email: shine.wangrs@gmail.com
author_url: http://codante.org
excerpt: "在搜索页面中将关键词高亮标出"
wordpress_id: 60
wordpress_url: http://codante.org/?p=60
date: '2010-06-29 18:12:23 +0800'
date_gmt: '2010-06-29 10:12:23 +0800'
---
<p>加载主题文件夹下的functions.php中，当然，如果能做成插件就更完美了，可以随时关闭。<br />
嵌套em标签，可以根据标签调整样式。</p>
<h2>代码</h2>
<p>[php]<br />
function search_word_replace($buffer){<br />
	if(is_search()){<br />
		$arr = explode(" ", get_search_query());<br />
		$arr = array_unique($arr);<br />
		foreach($arr as $v)<br />
			if($v)<br />
				$buffer = preg_replace("/(".$v.")/i", "<em>$1</em>", $buffer);<br />
	}<br />
	return $buffer;<br />
}<br />
add_filter("the_title", "search_word_replace", 200);<br />
add_filter("the_excerpt", "search_word_replace", 200);<br />
add_filter("the_content", "search_word_replace", 200);<br />
[/php]</p>
